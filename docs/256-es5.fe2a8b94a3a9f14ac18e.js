!function(){function n(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==r)return;var t,a,o=[],u=!0,i=!1;try{for(r=r.call(n);!(u=(t=r.next()).done)&&(o.push(t.value),!e||o.length!==e);u=!0);}catch(c){i=!0,a=c}finally{try{u||null==r.return||r.return()}finally{if(i)throw a}}return o}(n,e)||t(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,e){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=t(n))||e&&n&&"number"==typeof n.length){r&&(n=r);var a=0,o=function(){};return{s:o,n:function(){return a>=n.length?{done:!0}:{done:!1,value:n[a++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return i=n.done,n},e:function(n){c=!0,u=n},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw u}}}}function t(n,e){if(n){if("string"==typeof n)return a(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(n,e):void 0}}function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}!function(){"use strict";var t,a,o,u={8992:function(n,e,t){var a=regeneratorRuntime.mark(l),o=regeneratorRuntime.mark(v),u=regeneratorRuntime.mark(h),i=regeneratorRuntime.mark(p),c=regeneratorRuntime.mark(d),f=regeneratorRuntime.mark(m),s=regeneratorRuntime.mark(y);function l(n,e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n;case 1:if(!(r<e)){t.next=7;break}return t.next=4,r;case 4:++r,t.next=1;break;case 7:case"end":return t.stop()}},a)}function v(n,e){var t,a,u,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=0,a=r(n),o.prev=2,a.s();case 4:if((u=a.n()).done){o.next=11;break}return i=u.value,o.next=8,e(i,t);case 8:t+=1;case 9:o.next=4;break;case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(2),a.e(o.t0);case 16:return o.prev=16,a.f(),o.finish(16);case 19:case"end":return o.stop()}},o,null,[[2,13,16,19]])}function h(n){var e,t,a,o,i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=[],t=r(n);try{for(t.s();!(a=t.n()).done;)o=a.value,e.push(o)}catch(c){t.e(c)}finally{t.f()}i=e.length-1;case 4:if(!(i>=0)){u.next=10;break}return u.next=7,e[i];case 7:i--,u.next=4;break;case 10:case"end":return u.stop()}},u)}function p(n){var e,t,a,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=function(n){for(var e,r=n.length;0!==r;){var t;e=Math.floor(Math.random()*r),r--,t=[n[e],n[r]],n[r]=t[0],n[e]=t[1]}return n}(Array.from(l(0,n.length))),t=r(e),u.prev=2,t.s();case 4:if((a=t.n()).done){u.next=10;break}return o=a.value,u.next=8,n[o];case 8:u.next=4;break;case 10:u.next=15;break;case 12:u.prev=12,u.t0=u.catch(2),t.e(u.t0);case 15:return u.prev=15,t.f(),u.finish(15);case 18:case"end":return u.stop()}},i,null,[[2,12,15,18]])}function d(n,e){var r,t;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=Math.max(n.length,e.length),t=0;case 2:if(!(t<r)){a.next=8;break}return a.next=5,[n[t],e[t]];case 5:t++,a.next=2;break;case 8:case"end":return a.stop()}},c)}function m(n,e){var t,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=regeneratorRuntime.mark(function n(e){var t,a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=r(e),n.prev=1,t.s();case 3:if((a=t.n()).done){n.next=9;break}return o=a.value,n.next=7,o;case 7:n.next=3;break;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),t.e(n.t0);case 14:return n.prev=14,t.f(),n.finish(14);case 17:case"end":return n.stop()}},n,null,[[1,11,14,17]])})(n);case 1:if((a=Array.from(y(t,e))).length>0){o.next=4;break}return o.abrupt("break",8);case 4:return o.next=6,a;case 6:o.next=1;break;case 8:case"end":return o.stop()}},f)}function y(n,e){var r,t,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:r=n[Symbol.iterator](),a=0;case 2:if(o.t0=!1===(t=r.next()).done,!o.t0){o.next=8;break}return o.next=6,t.value;case 6:++a,o.t0=!(a>=e);case 8:if(!o.t0){o.next=12;break}case 10:o.next=2;break;case 12:case"end":return o.stop()}},s)}t.d(e,{w6:function(){return l},UI:function(){return v},GY:function(){return h},yg:function(){return p},$R:function(){return d},uK:function(){return m}})},5307:function(n,r,t){t.d(r,{hl:function(){return o},q9:function(){return u},ZN:function(){return i},fe:function(){return c},B5:function(){return f},lu:function(){return s},BU:function(){return l},W0:function(){return v},bM:function(){return p},dW:function(){return d},MX:function(){return m},JG:function(){return y},o1:function(){return g},KM:function(){return b},Kk:function(){return w}});var a=t(8992);function o(n,e){return Array.from(a.UI(a.w6(0,e),n))}function u(n,e){return o(function(){return n},e)}function i(n,e,r){for(var t=Math.min(n.length,e.length),a=0;a<t;++a)n[a]=r(n[a],e[a])}function c(n,e,r,t){for(var a=Math.min(n.length,e.length),o=t||new Array(a),u=0;u<a;++u)o[u]=r(n[u],e[u]);return o}function f(n,e,r){for(var t=n.length,a=r||new Array(t),o=0;o<t;++o)a[o]=e(n[o],o);return a}function s(n,e,r){return c(n,e,function(n,e){return n-e},r)}function l(n,e){i(n,e,function(n,e){return n+e})}function v(n,e){return c(n,e,function(n,e){return n*e},n)}function h(n,e){for(var r=Math.min(n.length,e.length),t=0,a=0,o=0;o<r;++o){var u=n[o]*e[o]-a,i=t+u;a=i-t-u,t=i}return t}function p(n){return u(0,n)}function d(n,e){return o(function(){return p(e)},n)}function m(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t=r-e;return o(function(){return e+Math.random()*t},n)}function y(n){return e(n)}function g(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o(function(n){return m(e,r,t)},n)}function b(n,e,r){for(var t=n.length,a=r||new Array(t),o=0;o<t;o++)a[o]=h(n[o],e);return a}function w(n,e){for(var r=new Array(n[0].length),t=Math.min(n.length,e.length),a=0;a<r.length;++a){for(var o=0,u=0,i=0;i<t;i++){var c=n[i][a]*e[i]-u,f=o+c;u=f-o-c,o=f}r[a]=o}return r}},9256:function(e,t,a){var o=a(8992),u=a(3515),i=a(5307);function c(n,e){for(var r=0,t=0;t<n.length;t++)r+=Math.pow(e[t]-n[t],2);return r/n.length}function f(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i.MX(n,e,r)}function s(n){return n[Math.floor(Math.random()*n.length)]}var l,v=a(3430),h=u.h0("#000000"),p=u.h0("#ffffff"),d=0,m=0,y=[16,[32,64],256],g=.005,b=w();function w(){function e(){return new v.Z.Optimizers.nesterov(g,.25)}function t(n){return new v.Z.Layers.Dense(n)}var a=n(y,3),u=a[0],i=a[1],c=a[2],f=new v.Z.Models.Sequential(e());f.addLayer(new v.Z.Layers.Dense(u));var s,l=r(i);try{for(l.s();!(s=l.n()).done;){var h=s.value;f.addLayer(t(h))}}catch(w){l.e(w)}finally{l.f()}f.addLayer(new v.Z.Layers.Dense(c)),f.compile();var p=new v.Z.Models.Sequential(e());p.addLayer(new v.Z.Layers.Dense(c));var d,m=r(o.GY(i));try{for(m.s();!(d=m.n()).done;){var b=d.value;p.addLayer(t(b))}}catch(w){m.e(w)}finally{m.f()}return p.addLayer(new v.Z.Layers.Dense(1)),p.compile(),new v.Z.Models.GAN(f,p,e())}function x(){var n=Math.floor(Math.sqrt(y[2])),e=5*n,r=k(5,n,function(){return s(l)}),t=k(5,n,function(){var n=f(y[0]);return b.compute(n)});postMessage({type:"training_data",width:e,height:e,trainingData:r,generatedData:t,currentIteration:m},[r,t])}function k(n,e,r){for(var t=e*n,a=new Uint32Array(t*t),o=0;o<n;o++)for(var u=0;u<n;u++)for(var i=A(r(o,u)),c=o*e,f=u*e,s=0;s<i.length;s++){var l=s%e;a[(c+(s-l)/e)*t+f+l]=i[s]}return a.buffer}function A(n){for(var e=new Uint32Array(n.length),r=0;r<n.length;r++)e[r]=u.a4(h,p,n[r]);return e}addEventListener("message",function(n){var e,r=n.data;function t(){r.params&&(y=r.params),b=w(),m=0,l&&l.length>0&&x()}switch(r.type){case"refresh":r.learningRate&&(g=r.learningRate),3===(null===(e=null==r?void 0:r.layers)||void 0===e?void 0:e.length)&&(y=r.layers),t();break;case"set_data":l=r.data,t()}}),setTimeout(function n(){try{!function(){if(b&&l&&0!==l.length){for(var n=performance.now(),e=0;++e&&(b.train(l,Math.max(1,l.length/200)),!(e%1==0&&performance.now()-n>500)););m+=e;var r=performance.now()-n;console.log("*** BATCH FINISHED with ".concat(e," in ").concat(r.toFixed(2),"ms (").concat((e/r*1e3).toFixed(2)," op/s)"));var t=c(b.discriminator.compute(s(l)),[1]),a=c(b.discriminator.compute(b.generator.compute(f(y[0]))),[0]);console.log("*** DISCRIMINATOR real loss ".concat(t.toFixed(2),", fake loss ").concat(a.toFixed(2)));var o=performance.now();o-d>1e3&&(x(),d=o,console.log("*** DRAW took ".concat((performance.now()-o).toFixed(2),"ms")))}}()}finally{b&&l&&0!==l.length?setTimeout(n,0):setTimeout(n,1e3)}},0)}},i={};function c(n){var e=i[n];if(void 0!==e)return e.exports;var r=i[n]={exports:{}};return u[n](r,r.exports,c),r.exports}c.m=u,c.x=function(){var n=c.O(void 0,[440],function(){return c(9256)});return c.O(n)},t=[],c.O=function(n,e,r,a){if(!e){var o=1/0;for(f=0;f<t.length;f++){e=t[f][0],r=t[f][1],a=t[f][2];for(var u=!0,i=0;i<e.length;i++)(!1&a||o>=a)&&Object.keys(c.O).every(function(n){return c.O[n](e[i])})?e.splice(i--,1):(u=!1,a<o&&(o=a));u&&(t.splice(f--,1),n=r())}return n}a=a||0;for(var f=t.length;f>0&&t[f-1][2]>a;f--)t[f]=t[f-1];t[f]=[e,r,a]},c.d=function(n,e){for(var r in e)c.o(e,r)&&!c.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},c.f={},c.e=function(n){return Promise.all(Object.keys(c.f).reduce(function(e,r){return c.f[r](n,e),e},[]))},c.u=function(n){return n+"-es2017.43c90935723906859ab3.js"},c.miniCssF=function(n){},c.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},c.tu=function(n){return void 0===a&&(a={createScriptURL:function(n){return n}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(a=trustedTypes.createPolicy("angular#bundler",a))),a.createScriptURL(n)},c.p="",function(){var n={256:1};c.f.i=function(e,r){n[e]||importScripts(c.tu(c.p+c.u(e)))};var e=self.webpackChunkneural_network=self.webpackChunkneural_network||[],r=e.push.bind(e);e.push=function(e){var t=e[0],a=e[1],o=e[2];for(var u in a)c.o(a,u)&&(c.m[u]=a[u]);for(o&&o(c);t.length;)n[t.pop()]=1;r(e)}}(),o=c.x,c.x=function(){return c.e(440).then(o)},c.x()}()}();