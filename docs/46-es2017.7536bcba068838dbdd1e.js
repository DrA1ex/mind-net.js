!function(){"use strict";var n,t,r,e={196:function(n,t,r){r.d(t,{oM:function(){return o},DV:function(){return i}});var e=r(809);function o(n){return 1/(1+Math.exp(-n))}function i(n){return e.B5(n,n=>n*(1-n))}},3110:function(n,t,r){function*e(n,t){for(let r=n;r<t;++r)yield r}function*o(n,t){let r=0;for(const e of n)yield t(e,r),r+=1}r.d(t,{w6:function(){return e},UI:function(){return o}})},809:function(n,t,r){r.d(t,{B5:function(){return u},lu:function(){return a},BU:function(){return c},dC:function(){return f},yH:function(){return s},AK:function(){return l},bM:function(){return h},MX:function(){return g},JG:function(){return d},Pj:function(){return p},o1:function(){return m},Kk:function(){return y}});var e=r(3110);function o(n,t){return Array.from(e.UI(e.w6(0,t),n))}function i(n,t,r){const e=Math.min(n.length,t.length),o=new Array(e);for(let i=0;i<e;++i)o[i]=r(n[i],t[i]);return o}function u(n,t){const r=n.length,e=new Array(r);for(let o=0;o<r;++o)e[o]=t(n[o]);return e}function a(n,t){return i(n,t,(n,t)=>n-t)}function c(n,t){!function(n,t,r){const e=Math.min(n.length,t.length);for(let o=0;o<e;++o)n[o]=n[o]+t[o]}(n,t)}function f(n,t){return i(n,t,(n,t)=>n*t)}function s(n,t){return u(n,n=>n*t)}function l(n,t){const r=Math.min(n.length,t.length);let e=0,o=0;for(let i=0;i<r;++i){const r=n[i]*t[i]-o,u=e+r;o=u-e-r,e=u}return e}function h(n){return function(n,t){return o(()=>0,t)}(0,n)}function g(n,t=0,r=1){const e=r-t;return o(()=>t+Math.random()*e,n)}function d(n){return[...n]}function p(n){return n.map(d)}function m(n,t,r=0,e=1){return o(n=>g(t,r,e),n)}function y(n,t){const r=new Array(n[0].length),e=Math.min(n.length,t.length);for(let o=0;o<r.length;++o){let i=0,u=0;for(let r=0;r<e;r++){const e=n[r][o]*t[r]-u,a=i+e;u=a-i-e,i=a}r[o]=i}return r}},7685:function(n,t,r){var e=r(809),o=r(3515),i=r(3131);class u{constructor(n,t,r,e){this.generator=new i.w(n,...t,r),this.discriminator=new i.w(r,...e,1)}get learningRate(){return this.generator.learningRate}set learningRate(n){this.generator.learningRate=n,this.discriminator.learningRate=n}generate(n){return this.generator.compute(n)}train(n,t){this.discriminator.train(n,[1]);const r=this.generator.compute(t);this.discriminator.train(r,[0]);const e=this.discriminator.train(r,[1],!1);this.generator.trainByError(e)}}const a=o.h0("#000000"),c=o.h0("#ffffff");let f,s=0,l=0,h=[10,[16,32],49,[16,16]],g=.01,d=new u(...h);function p(){const n=f[Math.floor(Math.random()*f.length)],t=Math.floor(Math.sqrt(n.length)),r=m(n),o=m(d.generate(e.MX(d.generator.layers[0].neuronCnt)));postMessage({type:"training_data",width:t,height:t,trainingData:r,generatedData:o,currentIteration:l},[r,o])}function m(n){const t=new Uint32Array(n.length);for(let r=0;r<n.length;r++)t[r]=o.a4(a,c,n[r]);return t.buffer}d.learningRate=.01,addEventListener("message",({data:n})=>{var t;function r(){n.params&&(h=n.params),d=new u(...h),d.learningRate=g,l=0,f&&f.length>0&&p()}switch(n.type){case"refresh":n.learningRate&&(g=n.learningRate),4===(null===(t=null==n?void 0:n.layers)||void 0===t?void 0:t.length)&&(h=n.layers),r();break;case"set_data":f=n.data,r()}}),setTimeout(function n(){try{!function(){if(!d||!f||0===f.length)return;const n=performance.now();let t=0;for(;++t;){const r=f[Math.floor(Math.random()*f.length)];if(d.train(r,e.MX(d.generator.layers[0].neuronCnt)),t%500==0&&performance.now()-n>500)break}l+=t,console.log(`*** BATCH TRAINING finished with ${t} iterations, took ${(performance.now()-n).toFixed(2)}ms`);const r=performance.now();r-s>1e3&&(p(),s=r,console.log(`*** DRAW took ${(performance.now()-r).toFixed(2)}ms`))}()}finally{d&&f&&0!==f.length?setTimeout(n,0):setTimeout(n,1e3)}},0)}},o={};function i(n){var t=o[n];if(void 0!==t)return t.exports;var r=o[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.m=e,i.x=function(){var n=i.O(void 0,[592],function(){return i(7685)});return i.O(n)},n=[],i.O=function(t,r,e,o){if(!r){var u=1/0;for(f=0;f<n.length;f++){r=n[f][0],e=n[f][1],o=n[f][2];for(var a=!0,c=0;c<r.length;c++)(!1&o||u>=o)&&Object.keys(i.O).every(function(n){return i.O[n](r[c])})?r.splice(c--,1):(a=!1,o<u&&(u=o));a&&(n.splice(f--,1),t=e())}return t}o=o||0;for(var f=n.length;f>0&&n[f-1][2]>o;f--)n[f]=n[f-1];n[f]=[r,e,o]},i.d=function(n,t){for(var r in t)i.o(t,r)&&!i.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},i.f={},i.e=function(n){return Promise.all(Object.keys(i.f).reduce(function(t,r){return i.f[r](n,t),t},[]))},i.u=function(n){return"common-es2017.164f3ca35d6d355977ee.js"},i.miniCssF=function(n){},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.tu=function(n){return void 0===t&&(t={createScriptURL:function(n){return n}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(t=trustedTypes.createPolicy("angular#bundler",t))),t.createScriptURL(n)},i.p="",function(){var n={46:1};i.f.i=function(t,r){n[t]||importScripts(i.tu(i.p+i.u(t)))};var t=self.webpackChunkneural_network=self.webpackChunkneural_network||[],r=t.push.bind(t);t.push=function(t){var e=t[0],o=t[1],u=t[2];for(var a in o)i.o(o,a)&&(i.m[a]=o[a]);for(u&&u(i);e.length;)n[e.pop()]=1;r(t)}}(),r=i.x,i.x=function(){return i.e(592).then(r)},i.x()}();