!function(){"use strict";var n,t,e,r={8992:function(n,t,e){function*r(n,t){for(let e=n;e<t;++e)yield e}function*o(n,t){let e=0;for(const r of n)yield t(r,e),e+=1}function*u(n){const t=[];for(const e of n)t.push(e);for(let e=t.length-1;e>=0;e--)yield t[e]}function*i(n){const t=function(n){let t,e=n.length;for(;0!==e;)t=Math.floor(Math.random()*e),e--,[n[e],n[t]]=[n[t],n[e]];return n}(Array.from(r(0,n.length)));for(const e of t)yield n[e]}function*c(n,t){const e=Math.max(n.length,t.length);for(let r=0;r<e;r++)yield[n[r],t[r]]}function*f(n,t){const e=function*(n){for(const t of n)yield t}(n);for(;;){const n=Array.from(a(e,t));if(!(n.length>0))break;yield n}}function*a(n,t){const e=n[Symbol.iterator]();let r,o=0;for(;!1===(r=e.next()).done&&(yield r.value,++o,!(o>=t)););}e.d(t,{w6:function(){return r},UI:function(){return o},GY:function(){return u},yg:function(){return i},$R:function(){return c},uK:function(){return f}})},5307:function(n,t,e){e.d(t,{hl:function(){return o},q9:function(){return u},ZN:function(){return i},fe:function(){return c},B5:function(){return f},lu:function(){return a},BU:function(){return l},W0:function(){return s},bM:function(){return d},dW:function(){return g},MX:function(){return y},JG:function(){return p},o1:function(){return m},KM:function(){return w},Kk:function(){return v}});var r=e(8992);function o(n,t){return Array.from(r.UI(r.w6(0,t),n))}function u(n,t){return o(()=>n,t)}function i(n,t,e){const r=Math.min(n.length,t.length);for(let o=0;o<r;++o)n[o]=e(n[o],t[o])}function c(n,t,e,r){const o=Math.min(n.length,t.length),u=r||new Array(o);for(let i=0;i<o;++i)u[i]=e(n[i],t[i]);return u}function f(n,t,e){const r=n.length,o=e||new Array(r);for(let u=0;u<r;++u)o[u]=t(n[u],u);return o}function a(n,t,e){return c(n,t,(n,t)=>n-t,e)}function l(n,t){i(n,t,(n,t)=>n+t)}function s(n,t){return c(n,t,(n,t)=>n*t,n)}function h(n,t){const e=Math.min(n.length,t.length);let r=0,o=0;for(let u=0;u<e;++u){const e=n[u]*t[u]-o,i=r+e;o=i-r-e,r=i}return r}function d(n){return u(0,n)}function g(n,t){return o(()=>d(t),n)}function y(n,t=0,e=1){const r=e-t;return o(()=>t+Math.random()*r,n)}function p(n){return[...n]}function m(n,t,e=0,r=1){return o(n=>y(t,e,r),n)}function w(n,t,e){const r=n.length,o=e||new Array(r);for(let u=0;u<r;u++)o[u]=h(n[u],t);return o}function v(n,t){const e=new Array(n[0].length),r=Math.min(n.length,t.length);for(let o=0;o<e.length;++o){let u=0,i=0;for(let e=0;e<r;e++){const r=n[e][o]*t[e]-i,c=u+r;i=c-u-r,u=c}e[o]=u}return e}},9256:function(n,t,e){var r=e(8992),o=e(3515),u=e(5307);function i(n,t){let e=0;for(let r=0;r<n.length;r++)e+=Math.pow(t[r]-n[r],2);return e/n.length}function c(n,t=0,e=1){return u.MX(n,t,e)}function f(n){return n[Math.floor(Math.random()*n.length)]}var a=e(3430);const l=o.h0("#000000"),s=o.h0("#ffffff");let h,d=0,g=0,y=[16,[32,64],256],p=.005,m=w();function w(){function n(){return new a.Z.Optimizers.nesterov(p,.25)}function t(n){return new a.Z.Layers.Dense(n)}const[e,o,u]=y,i=new a.Z.Models.Sequential(n());i.addLayer(new a.Z.Layers.Dense(e));for(const r of o)i.addLayer(t(r));i.addLayer(new a.Z.Layers.Dense(u)),i.compile();const c=new a.Z.Models.Sequential(n());c.addLayer(new a.Z.Layers.Dense(u));for(const f of r.GY(o))c.addLayer(t(f));return c.addLayer(new a.Z.Layers.Dense(1)),c.compile(),new a.Z.Models.GAN(i,c,n())}function v(){const n=Math.floor(Math.sqrt(y[2])),t=5*n,e=M(5,n,()=>f(h)),r=M(5,n,()=>{const n=c(y[0]);return m.compute(n)});postMessage({type:"training_data",width:t,height:t,trainingData:e,generatedData:r,currentIteration:g},[e,r])}function M(n,t,e){const r=t*n,o=new Uint32Array(r*r);for(let u=0;u<n;u++)for(let i=0;i<n;i++){const n=x(e(u,i)),c=u*t,f=i*t;for(let e=0;e<n.length;e++){const u=e%t;o[(c+(e-u)/t)*r+f+u]=n[e]}}return o.buffer}function x(n){const t=new Uint32Array(n.length);for(let e=0;e<n.length;e++)t[e]=o.a4(l,s,n[e]);return t}addEventListener("message",({data:n})=>{var t;function e(){n.params&&(y=n.params),m=w(),g=0,h&&h.length>0&&v()}switch(n.type){case"refresh":n.learningRate&&(p=n.learningRate),3===(null===(t=null==n?void 0:n.layers)||void 0===t?void 0:t.length)&&(y=n.layers),e();break;case"set_data":h=n.data,e()}}),setTimeout(function n(){try{!function(){if(!m||!h||0===h.length)return;const n=performance.now();let t=0;for(;++t&&(m.train(h,Math.max(1,h.length/200)),!(t%1==0&&performance.now()-n>500)););g+=t;const e=performance.now()-n;console.log(`*** BATCH FINISHED with ${t} in ${e.toFixed(2)}ms (${(t/e*1e3).toFixed(2)} op/s)`);const r=i(m.discriminator.compute(f(h)),[1]),o=i(m.discriminator.compute(m.generator.compute(c(y[0]))),[0]);console.log(`*** DISCRIMINATOR real loss ${r.toFixed(2)}, fake loss ${o.toFixed(2)}`);const u=performance.now();u-d>1e3&&(v(),d=u,console.log(`*** DRAW took ${(performance.now()-u).toFixed(2)}ms`))}()}finally{m&&h&&0!==h.length?setTimeout(n,0):setTimeout(n,1e3)}},0)}},o={};function u(n){var t=o[n];if(void 0!==t)return t.exports;var e=o[n]={exports:{}};return r[n](e,e.exports,u),e.exports}u.m=r,u.x=function(){var n=u.O(void 0,[440],function(){return u(9256)});return u.O(n)},n=[],u.O=function(t,e,r,o){if(!e){var i=1/0;for(a=0;a<n.length;a++){e=n[a][0],r=n[a][1],o=n[a][2];for(var c=!0,f=0;f<e.length;f++)(!1&o||i>=o)&&Object.keys(u.O).every(function(n){return u.O[n](e[f])})?e.splice(f--,1):(c=!1,o<i&&(i=o));c&&(n.splice(a--,1),t=r())}return t}o=o||0;for(var a=n.length;a>0&&n[a-1][2]>o;a--)n[a]=n[a-1];n[a]=[e,r,o]},u.d=function(n,t){for(var e in t)u.o(t,e)&&!u.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},u.f={},u.e=function(n){return Promise.all(Object.keys(u.f).reduce(function(t,e){return u.f[e](n,t),t},[]))},u.u=function(n){return n+"-es2017.43c90935723906859ab3.js"},u.miniCssF=function(n){},u.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},u.tu=function(n){return void 0===t&&(t={createScriptURL:function(n){return n}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(t=trustedTypes.createPolicy("angular#bundler",t))),t.createScriptURL(n)},u.p="",function(){var n={256:1};u.f.i=function(t,e){n[t]||importScripts(u.tu(u.p+u.u(t)))};var t=self.webpackChunkneural_network=self.webpackChunkneural_network||[],e=t.push.bind(t);t.push=function(t){var r=t[0],o=t[1],i=t[2];for(var c in o)u.o(o,c)&&(u.m[c]=o[c]);for(i&&i(u);r.length;)n[r.pop()]=1;e(t)}}(),e=u.x,u.x=function(){return u.e(440).then(e)},u.x()}();